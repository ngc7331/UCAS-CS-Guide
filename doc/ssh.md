# SSH
## SSH是什么

SSH（Secure Shell，安全外壳协议）是一种加密网络传输协议，常用于从客户端远程登录服务器。

## 为什么需要SSH

对于很多计系课程来说，配置本地linux环境具有以下缺点：

- **步骤繁琐，从而出错概率较大。**好多意想不到的报错都是因为不经意间敲漏了若干命令或是空格。
- **占用空间大。**虚拟机的OVA文件往往有几十个GB，会挤占好多好多的游戏空间。
- **对计算机性能有一定要求。**如果内存过小，容易卡成PPT。
- ……

因此，不少课程配备了相应的云端服务，来缓解大家的配置压力。

例如，2021春季学期开设的**计算机科学导论**课程就为大家准备了Web版的VS Code，将其作为一种编译运行Go语言的备选方案；**计算机组成原理**研讨课也提供了云端虚拟机，为有需要的同学提供实验设计、代码编写、提交与推送、错误仿真波形查看等功能。

SSH作为一种远程登陆的手段，可以令本地客户端直接连接远程服务器，并允许用户通过命令行界面远程执行命令。

## SSH的安装

如果想远程登陆服务器，只需安装客户端。（Ubuntu默认安装了客户端）

```
sudo apt install openssh-client
```

如果想把你的计算机作为服务器，让其他计算机连接，需要安装服务器。

```
sudo apt install openssh-server
```

## 使用SSH连接到远程主机

登陆一台远程主机，往往需要知道四个参数：

- 远程主机提供的用户名（这里以ucas为例）
- 远程主机的ip地址（这里以X.X.X.X为例）
- 远程主机SSH服务的端口号（这里以1234为例；如果不指定“-p 端口号”，默认端口为22）
- 远程主机该用户名相应的密码

基本使用格式为：

```
ssh ucas@X.X.X.X -p 1234
```

如果是第一次登陆该远程主机，一般会出现以下确认界面：

```
The authenticity of host '...' can't be established.
ECDSA key fingerprint is SHA256: ...
Are you sure you want to continue connecting (yes/no)?
```

输入yes回车即可。

接下来需要输入远程主机的密码，注意输入过程中并不会有任何提示。输入完成后直接回车即可。

此时，远程主机的命令行提示符会取代原来的提示符，说明已成功连接。

可以通过输入exit命令回车退出远程主机的连接。

## 设置免密登陆

经过上述步骤，每次登陆远程主机都需要输入密码，较为繁琐。因此，推荐配置通过公钥登陆。

首先在本地计算机上生成密钥对：

``` 
ssh-keygen -t rsa
```

此时在~/.ssh下会出现下述文件：

```
id_rsa			//私钥文件
id_rsa.pub		//公钥文件
```

将公钥文件id_rsa.pub内容复制粘贴远程主机~/.ssh/authorized_keys文件末尾即可完成配置，可以通过ssh-copy-id命令实现：

```
ssh-copy-id ucas@X.X.X.X -p 1234
```

根据提示英文操作完成配置。

## 在vscode中使用ssh

## ssh-key

